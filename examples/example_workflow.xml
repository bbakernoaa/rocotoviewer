<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE workflow [
  <!ELEMENT workflow (cycledef*, taskdef*, dependency*)>
  <!ATTLIST workflow workflowid ID #REQUIRED>
]>

<workflow workflowid="sample_workflow" name="Sample Workflow">
  <cycledef group="first" cyclethrougheachpt="false">
    202301010000, 20230102000, 20230103000, 06:00
  </cycledef>

 <resources>
    <pool>
      <entry key="queue" value="batch"/>
      <entry key="walltime" value="02:00:00"/>
      <entry key="nodes" value="1:ppn=1"/>
    </pool>
  </resources>

  <tasks>
    <task name="task1" cycledefs="first" status="QUEUED" start_time="2023-01-01T00:00:00Z">
      <!-- Task 1 definition -->
      <command>/path/to/script1.sh</command>
      <walltime>00:10:00</walltime>
      <queue>debug</queue>
      <envar name="TASK_ID" value="task1"/>
      <dependency>
        <cyclestr>@Y@m@d@H</cyclestr>
      </dependency>
    </task>

    <task name="task2" cycledefs="first">
      <!-- Task 2 definition -->
      <command>/path/to/script2.sh</command>
      <envar name="TASK_ID" value="task2"/>
      <dependency>
        <taskdep task="task1"/>
      </dependency>
    </task>

    <task name="task3" cycledefs="first">
      <!-- Task 3 definition -->
      <command>/path/to/script3.sh</command>
      <envar name="TASK_ID" value="task3"/>
      <dependency>
        <taskdep task="task2"/>
      </dependency>
    </task>

    <task name="task4" cycledefs="first">
      <!-- Task 4 definition -->
      <command>/path/to/script4.sh</command>
      <envar name="TASK_ID" value="task4"/>
      <dependency>
        <or>
          <taskdep task="task2"/>
          <taskdep task="task3"/>
        </or>
      </dependency>
    </task>
  </tasks>

  <!-- Global dependencies -->
  <dependency>
    <taskdep task="task4"/>
  </dependency>

  <!-- Workflow metadata -->
  <description>
    This is a sample Rocoto workflow for demonstration purposes.
    It shows a simple linear dependency chain of tasks.
  </description>
</workflow>
